<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aragon Launcher</title>
    <link rel="icon" type="image/png" href="/public/icon.png">
    <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
    <div class="app">
        <!-- Top Navigation Bar -->
        <div class="navbar" data-tauri-drag-region>
            <div class="navbar-left">
                <img src="/icon.png" alt="A" class="navbar-icon">
            </div>
            <div class="navbar-right">
                <button class="navbar-button settings-nav" id="settingsButton">Settings ⚙</button>
                <button class="navbar-button minimize-btn" id="minimize">−</button>
                <button class="navbar-button close-btn" id="close">✕</button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Column: Banner + Recent Updates -->
            <div class="left-column">
                <!-- Promotional Banner -->
                <div class="promo-banner">
                    <div class="banner-content">
                        <img src="/logo.png" alt="Aragon RSPS" class="banner-logo">
                        <h2 class="banner-title">Welcome to Aragon</h2>
                        <p class="banner-subtitle">Epic adventures await</p>
                    </div>
                </div>

                <!-- Recent Updates Section -->
                <div class="recent-updates">
                    <div class="section-header">
                        <h3>Recent Updates</h3>
                        <button class="view-all-btn">View All</button>
                    </div>
                    <div class="update-cards">
                        <div class="update-card">
                            <div class="update-image">
                                <div class="update-placeholder">Update 1</div>
                            </div>
                            <div class="update-info">
                                <h4>New Features Released</h4>
                                <p class="update-date">22 October 2025</p>
                            </div>
                        </div>
                        <div class="update-card">
                            <div class="update-image">
                                <div class="update-placeholder">Update 2</div>
                            </div>
                            <div class="update-info">
                                <h4>Performance Improvements</h4>
                                <p class="update-date">15 October 2025</p>
                            </div>
                        </div>
                        <div class="update-card">
                            <div class="update-image">
                                <div class="update-placeholder">Update 3</div>
                            </div>
                            <div class="update-info">
                                <h4>Bug Fixes & Stability</h4>
                                <p class="update-date">8 October 2025</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar: Logo, Play Button, Settings -->
            <div class="right-sidebar">
                <!-- Aragon Logo -->
                <div class="game-logo-section">
                    <img src="/logo.png" alt="Aragon RSPS" class="game-logo">
                </div>

                <!-- Play Button -->
                <button class="play-button" id="playButton" disabled>
                    <span id="playButtonText">PLAY</span>
                </button>

                <!-- Status Section -->
                <div class="status-section">
                    <p class="status-text" id="status">Initializing...</p>
                    <div class="progress-container" id="progressContainer" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <p class="progress-details" id="progressDetails"></p>
                    </div>
                </div>

                <!-- Account/Character Info -->
                <div class="account-section">
                    <div class="account-label">
                        Characters
                        <span class="info-icon" data-tooltip="Automatically login with the selected character's credentials for easy access">ℹ</span>
                    </div>
                    <div class="account-info">
                        <select id="characterSelect" class="character-selector">
                            <option value="">No character selected</option>
                        </select>
                    </div>
                </div>

                <!-- Quick Play Button -->
                <button class="quick-play-button" id="quickPlayButton" disabled>
                    <span class="quick-play-text">QUICK PLAY</span>
                    <span class="quick-play-count" id="quickPlayCount">0 characters enabled</span>
                    <span class="quick-play-tooltip" data-tooltip="Launches all characters with Quick Play enabled at once, each with their own login credentials">ℹ</span>
                </button>

                <!-- Quick Links -->
                <div class="quick-links">
                    <a href="#" class="quick-link" id="characterManagement">Character Management</a>
                    <a href="#" class="quick-link">Community Website</a>
                </div>

                <!-- Version Info -->
                <div class="version-info">
                    <span id="versionText">Launcher v1.4.0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Character Management Modal -->
    <div class="modal" id="characterModal">
        <div class="modal-content character-modal-content">
            <div class="modal-header">
                <h2>Character Management</h2>
                <button class="modal-close" id="closeCharacterModal">✕</button>
            </div>
            <div class="modal-body">
                <div class="character-table-container">
                    <table class="character-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Quick Launch</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="characterTableBody">
                            <tr class="no-characters">
                                <td colspan="3" style="text-align: center; color: var(--text-muted);">No characters added yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="add-character-section">
                    <h3>Add New Character</h3>
                    
                    <!-- Quick Play Limit Info -->
                    <div class="quick-play-limit-info" id="quickPlayLimitInfo" style="display: none;">
                        <span class="info-icon">ℹ</span>
                        <span class="info-text">Maximum 2 characters can have Quick Play enabled. Disable one to enable another.</span>
                    </div>
                    
                    <div class="setting-item">
                        <label for="newUsername">Username:</label>
                        <input type="text" id="newUsername" placeholder="Enter username" maxlength="20">
                    </div>
                    <div class="setting-item">
                        <label for="newPassword">Password:</label>
                        <input type="password" id="newPassword" placeholder="Enter password">
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="newQuickLaunch">
                            Set as quick launch character
                        </label>
                    </div>
                    <button class="button-primary" id="addCharacterBtn" style="width: 100%;">Add Character</button>
                </div>
            </div>
            <div class="modal-footer">
                <div class="character-count" id="characterCount">0 / 10 characters</div>
                <button class="button-secondary" id="closeCharacterModalBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content settings-modal-wide">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close" id="closeSettings">✕</button>
            </div>
            <div class="settings-container">
                <div class="settings-sidebar">
                    <button class="settings-tab active" data-tab="general">General</button>
                    <button class="settings-tab" data-tab="whats-new">What's New?</button>
                </div>
                <div class="settings-content">
                    <!-- General Tab -->
                    <div class="settings-tab-content active" id="generalTab">
                        <h3 class="tab-title">General Settings</h3>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="autoUpdate" checked disabled>
                                Automatically check for updates (Required)
                            </label>
                            <p class="setting-description">Updates are checked automatically to ensure you have the latest features and security fixes.</p>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="closeOnLaunch">
                                Close launcher when game starts
                            </label>
                            <p class="setting-description">The launcher will close after launching the game client.</p>
                        </div>
                        <div class="setting-item">
                            <label for="closeDelay">Close delay: <span id="closeDelayValue">5</span> seconds</label>
                            <input type="range" id="closeDelay" min="2" max="15" value="5" step="1">
                            <p class="setting-description">Time to wait before closing the launcher (when enabled).</p>
                        </div>
                    </div>

                    <!-- What's New Tab -->
                    <div class="settings-tab-content" id="whatsNewTab">
                        <h3 class="tab-title">What's New?</h3>
                        <div class="updates-list" id="updatesList">
                            <!-- Updates will be loaded dynamically from replit.md -->
                            <div class="update-entry">
                                <h4>Version 1.4.0 - October 23, 2025</h4>
                                <p class="update-subtitle">Settings Redesign & Character Management</p>
                                <ul>
                                    <li>Redesigned settings modal with tabbed sidebar navigation</li>
                                    <li>Added "What's New?" tab displaying launcher update history</li>
                                    <li>Simplified settings to focus on essential options</li>
                                    <li>Made auto-update mandatory for improved security and stability</li>
                                    <li>Implemented "Quick Play" button for launching multiple characters simultaneously</li>
                                    <li>Enhanced credential handling for secure character authentication</li>
                                    <li>Added info tooltips throughout the interface for better user guidance</li>
                                    <li>Quick Play button displays real-time count of enabled characters</li>
                                    <li>Custom tooltip styling with gold-themed overlays matching launcher design</li>
                                </ul>
                            </div>
                            <div class="update-entry">
                                <h4>Version 1.3.0 - October 22, 2025</h4>
                                <p class="update-subtitle">Complete Launcher Redesign</p>
                                <ul>
                                    <li>Complete UI restructure with modern two-column layout</li>
                                    <li>Left panel featuring promotional banner and Recent Updates section</li>
                                    <li>Right sidebar with game logo and action buttons</li>
                                    <li>Top navigation bar with Aragon icon and Settings button</li>
                                    <li>Dragon theme color palette (crimson, gold, ember tones)</li>
                                    <li>Multi-layered gradient backgrounds with atmospheric depth</li>
                                    <li>Enhanced visual effects including glows, shadows, and smooth animations</li>
                                    <li>Premium button designs with crimson-to-gold hover gradients</li>
                                    <li>Glass-effect cards with warm brown-tinted borders</li>
                                    <li>Clean, polished interface without overlapping elements</li>
                                </ul>
                            </div>
                            <div class="update-entry">
                                <h4>Version 1.2.0 - October 10, 2025</h4>
                                <p class="update-subtitle">Enhanced Features & Performance</p>
                                <ul>
                                    <li>Added character management system with saved credentials</li>
                                    <li>Implemented configurable close delay with visual countdown (2-15 seconds)</li>
                                    <li>Fixed console window visibility on Windows for cleaner experience</li>
                                    <li>Added backward-compatible configuration system</li>
                                    <li>Platform-specific JRE bundling for streamlined deployment</li>
                                    <li>Improved launcher stability and error handling</li>
                                </ul>
                            </div>
                            <div class="update-entry">
                                <h4>Version 1.0.0 - October 10, 2025</h4>
                                <p class="update-subtitle">Tauri Architecture Migration</p>
                                <ul>
                                    <li>Complete rebuild using Tauri (Rust + Web Technologies)</li>
                                    <li>Reduced installer size from ~60MB to ~3-5MB (94% reduction)</li>
                                    <li>Modern web-based UI with HTML/CSS/JavaScript</li>
                                    <li>Implemented secure Rust backend for auto-updates and client launching</li>
                                    <li>Added Vite development server for rapid UI development</li>
                                    <li>Dual-mode operation: browser preview and desktop distribution</li>
                                    <li>SHA-256 hash verification for secure file downloads</li>
                                    <li>Real-time progress tracking with speed and ETA display</li>
                                    <li>Cross-platform support: Windows, macOS, and Linux</li>
                                    <li>Professional native installers with auto-uninstall support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="button-secondary" id="resetSettings">Reset to Default</button>
                <div class="modal-footer-right">
                    <button class="button-secondary" id="cancelSettings">Cancel</button>
                    <button class="button-primary" id="saveSettings">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Alert/Confirm Modal -->
    <div class="modal custom-alert-modal" id="customAlertModal">
        <div class="modal-content alert-modal-content">
            <div class="modal-header alert-modal-header">
                <h2 id="alertModalTitle">Alert</h2>
            </div>
            <div class="modal-body alert-modal-body">
                <p id="alertModalMessage"></p>
            </div>
            <div class="modal-footer alert-modal-footer">
                <button class="button-secondary" id="alertCancelBtn" style="display: none;">Cancel</button>
                <button class="button-primary" id="alertOkBtn">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
